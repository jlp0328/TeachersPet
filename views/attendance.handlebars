<h1 id="welcome"> Attendance </h1>

<h2> Take Attendance for {{subject}} </h2>

	<form id="attendanceForm" action="/attendance" method="POST">
		<p> Enter Date </p>
		<input type="text" name="date" id="date"> </input>
		<input id="subjectId" type="hidden" name="subject" value="{{subject}}">

		{{#each students}}
			<p> {{this.systemNumber}} {{this.first_name}} {{this.last_name}}</p>

			<select name="newAttendance_{{this.id}}" data-studentId="{{this.id}}">
			  <option value="present">Present</option>
			  <option value="tardy">Tardy</option>
			  <option value="absent">Absent</option>
			</select>
		{{/each}}

		<button class="submitButton"> Submit Attendance </button>
	</form>

<script type="text/javascript">

$(".submitButton").on("click", function(){

var $presences = $("select");
var attendance= [];

var date = $("#date");
console.log(date);

var subject = $("#subjectId").val();
console.log(subject);

$presences.each(function(i,presence){
    var student_id = presence.attr("data-studentId");
    attendance.push({
        "student_id": student_id,
        "date": date,
        "subject":subject,
        "presence": presence.val()
    })
});

});

</script>



